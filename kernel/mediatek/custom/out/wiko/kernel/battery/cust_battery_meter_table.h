#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		   27000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#define RBAT_PULL_DOWN_R		  100000	
#endif
#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
//BEGIN <battary> <DATE20130620> <battary tempreature> zhangxiaofei
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
    	 {-30,124607},
    	 {-25,94918},
        {-20,73035},
        {-15,56734},
        {-10,44468},
        { -5,35150},
        {  0,28008},
        {  5,22486},
        { 10,18182},
        { 15,14803},
        { 20,12129},
        { 25,10000},
        { 30,8292},
        { 35,6914},
        { 40,5795},
        { 45,4872},
        { 50,4101},
        { 55,3467},
        { 60,2936},
        { 65,2494},
        { 70,2130},
        { 75,1817},
        { 80,1562}
    };
#endif
//END <battary> <DATE20130620> <battary tempreature> zhangxiaofei
#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
    {0   ,  4276},
    {2   ,  4254},
    {4   ,  4233},
    {6   ,  4211},
    {8   ,  4188},
    {10  ,  4156},
    {12  ,  4105},
    {14  ,  4079},
    {16  ,  4056},
    {18  ,  4026},
    {20  ,  3999},
    {21  ,  3978},
    {23  ,  3959},
    {25  ,  3944},
    {27  ,  3928},
    {29  ,  3915},
    {31  ,  3901},
    {33  ,  3890},
    {35  ,  3879},
    {37  ,  3869},
    {39  ,  3860},
    {41  ,  3850},
    {43  ,  3842},
    {45  ,  3833},
    {47  ,  3826},
    {49  ,  3819},
    {51  ,  3812},
    {53  ,  3806},
    {55  ,  3799},
    {57  ,  3794},
    {59  ,  3789},
    {61  ,  3784},
    {63  ,  3779},
    {64  ,  3773},
    {66  ,  3768},
    {68  ,  3761},
    {70  ,  3757},
    {72  ,  3751},
    {74  ,  3745},
    {76  ,  3738},
    {78  ,  3732},
    {80  ,  3726},
    {82  ,  3719},
    {84  ,  3712},
    {86  ,  3704},
    {88  ,  3694},
    {90  ,  3685},
    {92  ,  3667},
    {94  ,  3639},
    {96  ,  3601},
    {98  ,  3540},
    {100 ,  3439},
    {100 ,  3439},
    {100 ,  3439},
    {100 ,  3439},
    {100 ,  3439},
    {100 ,  3439},
    {100 ,  3439},
    {100 ,  3439},
    {100 ,  3439},
    {100 ,  3439},
    {100 ,  3439},
    {100 ,  3439} 	       
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
    {0   ,  4318},
    {2   ,  4294},
    {4   ,  4269},
    {6   ,  4218},
    {7   ,  4177},
    {9   ,  4156},
    {11  ,  4138},
    {13  ,  4120},
    {15  ,  4102},
    {17  ,  4089},
    {18  ,  4078},
    {20  ,  4060},
    {22  ,  4029},
    {24  ,  3999},
    {26  ,  3976},
    {28  ,  3958},
    {30  ,  3942},
    {31  ,  3928},
    {33  ,  3918},
    {35  ,  3907},
    {37  ,  3895},
    {39  ,  3885},
    {41  ,  3875},
    {43  ,  3865},
    {44  ,  3857},
    {46  ,  3849},
    {48  ,  3840},
    {50  ,  3832},
    {52  ,  3825},
    {54  ,  3817},
    {55  ,  3809},
    {57  ,  3803},
    {59  ,  3797},
    {61  ,  3792},
    {63  ,  3785},
    {65  ,  3780},
    {67  ,  3775},
    {68  ,  3771},
    {70  ,  3765},
    {72  ,  3760},
    {74  ,  3755},
    {76  ,  3750},
    {78  ,  3743},
    {80  ,  3736},
    {81  ,  3729},
    {83  ,  3720},
    {85  ,  3712},
    {87  ,  3707},
    {89  ,  3701},
    {91  ,  3697},
    {92  ,  3687},
    {94  ,  3663},
    {96  ,  3615},
    {98  ,  3540},
    {100 ,  3417},
    {100 ,  3417},
    {100 ,  3417},
    {100 ,  3417},
    {100 ,  3417},
    {100 ,  3417},
    {100 ,  3417},
    {100 ,  3417},
    {100 ,  3417} 	       
};           

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
    {0    ,  4331},
    {2    ,  4311},
    {3    ,  4291},
    {5    ,  4273},
    {7    ,  4254},
    {8    ,  4236},
    {10   ,  4218},
    {11   ,  4199},
    {13   ,  4182},
    {15   ,  4164},
    {16   ,  4148},
    {18   ,  4130},
    {20   ,  4113},
    {21   ,  4096},
    {23   ,  4081},
    {24   ,  4070},
    {26   ,  4056},
    {28   ,  4031},
    {29   ,  4009},
    {31   ,  3990},
    {33   ,  3981},
    {34   ,  3970},
    {36   ,  3955},
    {37   ,  3939},
    {39   ,  3921},
    {41   ,  3906},
    {42   ,  3893},
    {44   ,  3883},
    {46   ,  3873},
    {47   ,  3863},
    {49   ,  3853},
    {50   ,  3846},
    {52   ,  3838},
    {54   ,  3831},
    {55   ,  3823},
    {57   ,  3817},
    {59   ,  3811},
    {60   ,  3806},
    {62   ,  3800},
    {63   ,  3795},
    {65   ,  3791},
    {67   ,  3785},
    {68   ,  3781},
    {70   ,  3774},
    {72   ,  3765},
    {73   ,  3759},
    {75   ,  3754},
    {76   ,  3748},
    {78   ,  3743},
    {80   ,  3739},
    {81   ,  3733},
    {83   ,  3726},
    {85   ,  3719},
    {86   ,  3711},
    {88   ,  3699},
    {89   ,  3693},
    {91   ,  3692},
    {93   ,  3689},
    {94   ,  3682},
    {96   ,  3646},
    {98   ,  3581},
    {99   ,  3485},
    {100  ,  3318} 	       
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
    {0   ,  4338},
    {2   ,  4319},
    {3   ,  4301},
    {5   ,  4283},
    {6   ,  4264},
    {8   ,  4246},
    {10  ,  4227},
    {11  ,  4209},
    {13  ,  4193},
    {14  ,  4175},
    {16  ,  4158},
    {18  ,  4138},
    {19  ,  4122},
    {21  ,  4105},
    {23  ,  4090},
    {24  ,  4073},
    {26  ,  4057},
    {27  ,  4042},
    {29  ,  4024},
    {31  ,  4009},
    {32  ,  3997},
    {34  ,  3983},
    {35  ,  3968},
    {37  ,  3950},
    {39  ,  3932},
    {40  ,  3915},
    {42  ,  3900},
    {43  ,  3889},
    {45  ,  3878},
    {47  ,  3866},
    {48  ,  3856},
    {50  ,  3847},
    {51  ,  3839},
    {53  ,  3831},
    {55  ,  3823},
    {56  ,  3818},
    {58  ,  3811},
    {59  ,  3805},
    {61  ,  3799},
    {63  ,  3794},
    {64  ,  3788},
    {66  ,  3783},
    {67  ,  3782},
    {69  ,  3774},
    {71  ,  3763},
    {72  ,  3754},
    {74  ,  3747},
    {76  ,  3740},
    {77  ,  3734},
    {79  ,  3729},
    {80  ,  3721},
    {82  ,  3715},
    {84  ,  3706},
    {85  ,  3697},
    {87  ,  3690},
    {88  ,  3680},
    {90  ,  3677},
    {92  ,  3676},
    {93  ,  3671},
    {95  ,  3661},
    {96  ,  3614},
    {98  ,  3544},
    {100 ,  3442} 	       
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
    {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
    {675  ,  4276},
    {675  ,  4254},
    {917  ,  4233},
    {940  ,  4211},
    {928  ,  4188},
    {897  ,  4156},
    {852  ,  4105},
    {811  ,  4079},
    {780  ,  4056},
    {741  ,  4026},
    {720  ,  3999},
    {759  ,  3978},
    {780  ,  3959},
    {772  ,  3944},
    {759  ,  3928},
    {752  ,  3915},
    {776  ,  3901},
    {774  ,  3890},
    {824  ,  3879},
    {815  ,  3869},
    {825  ,  3860},
    {790  ,  3850},
    {856  ,  3842},
    {859  ,  3833},
    {861  ,  3826},
    {867  ,  3819},
    {905  ,  3812},
    {912  ,  3806},
    {906  ,  3799},
    {822  ,  3794},
    {833  ,  3789},
    {837  ,  3784},
    {849  ,  3779},
    {854  ,  3773},
    {857  ,  3768},
    {855  ,  3761},
    {859  ,  3757},
    {873  ,  3751},
    {910  ,  3745},
    {875  ,  3738},
    {922  ,  3732},
    {886  ,  3726},
    {855  ,  3719},
    {868  ,  3712},
    {907  ,  3704},
    {939  ,  3694},
    {965  ,  3685},
    {985  ,  3667},
    {1002 ,  3639},
    {989  ,  3601},
    {1276 ,  3540},
    {1145 ,  3439},
    {1145 ,  3439},
    {1145 ,  3439},
    {1145 ,  3439},
    {1145 ,  3439},
    {1145 ,  3439},
    {1145 ,  3439},
    {1145 ,  3439},
    {1145 ,  3439},
    {1145 ,  3439},
    {1145 ,  3439},
    {1145 ,  3439}        
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
    {0     ,    4318},
    {526   ,    4294},
    {550   ,    4269},
    {559   ,    4218},
    {754   ,    4177},
    {797   ,    4156},
    {801   ,    4138},
    {804   ,    4120},
    {794   ,    4102},
    {811   ,    4089},
    {835   ,    4078},
    {825   ,    4060},
    {795   ,    4029},
    {811   ,    3999},
    {825   ,    3976},
    {812   ,    3958},
    {794   ,    3942},
    {795   ,    3928},
    {812   ,    3918},
    {812   ,    3907},
    {788   ,    3895},
    {804   ,    3885},
    {814   ,    3875},
    {793   ,    3865},
    {799   ,    3857},
    {831   ,    3849},
    {830   ,    3840},
    {825   ,    3832},
    {836   ,    3825},
    {838   ,    3817},
    {832   ,    3809},
    {846   ,    3803},
    {853   ,    3797},
    {857   ,    3792},
    {864   ,    3785},
    {870   ,    3780},
    {874   ,    3775},
    {865   ,    3771},
    {881   ,    3765},
    {895   ,    3760},
    {916   ,    3755},
    {905   ,    3750},
    {950   ,    3743},
    {911   ,    3736},
    {878   ,    3729},
    {889   ,    3720},
    {929   ,    3712},
    {972   ,    3707},
    {1004  ,    3701},
    {1058  ,    3697},
    {1122  ,    3687},
    {1119  ,    3663},
    {1214  ,    3615},
    {1373  ,    3540},
    {1595  ,    3417},
    {1595  ,    3417},
    {1595  ,    3417},
    {1595  ,    3417},
    {1595  ,    3417},
    {1595  ,    3417},
    {1595  ,    3417},
    {1595  ,    3417},
    {1595  ,    3417}        
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
    {129 ,      4331},
    {129 ,      4311},
    {130 ,      4291},
    {134 ,      4273},
    {135 ,      4254},
    {134 ,      4236},
    {135 ,      4218},
    {135 ,      4199},
    {140 ,      4182},
    {139 ,      4164},
    {146 ,      4148},
    {145 ,      4130},
    {148 ,      4113},
    {149 ,      4096},
    {150 ,      4081},
    {159 ,      4070},
    {166 ,      4056},
    {153 ,      4031},
    {156 ,      4009},
    {154 ,      3990},
    {167 ,      3981},
    {168 ,      3970},
    {157 ,      3955},
    {152 ,      3939},
    {140 ,      3921},
    {137 ,      3906},
    {132 ,      3893},
    {133 ,      3883},
    {132 ,      3873},
    {131 ,      3863},
    {133 ,      3853},
    {132 ,      3846},
    {132 ,      3838},
    {130 ,      3831},
    {130 ,      3823},
    {132 ,      3817},
    {136 ,      3811},
    {138 ,      3806},
    {141 ,      3800},
    {143 ,      3795},
    {150 ,      3791},
    {146 ,      3785},
    {147 ,      3781},
    {143 ,      3774},
    {134 ,      3765},
    {137 ,      3759},
    {140 ,      3754},
    {139 ,      3748},
    {140 ,      3743},
    {141 ,      3739},
    {146 ,      3733},
    {147 ,      3726},
    {152 ,      3719},
    {151 ,      3711},
    {147 ,      3699},
    {151 ,      3693},
    {160 ,      3692},
    {167 ,      3689},
    {181 ,      3682},
    {172 ,      3646},
    {184 ,      3581},
    {207 ,      3485},
    {276 ,      3318} 	       
}; 

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
    {87   ,    4338},
    {87   ,    4319},
    {87   ,    4301},
    {88   ,    4283},
    {88   ,    4264},
    {89   ,    4246},
    {131  ,    4227},
    {130  ,    4209},
    {138  ,    4193},
    {137  ,    4175},
    {137  ,    4158},
    {132  ,    4138},
    {133  ,    4122},
    {134  ,    4105},
    {139  ,    4090},
    {136  ,    4073},
    {139  ,    4057},
    {143  ,    4042},
    {142  ,    4024},
    {139  ,    4009},
    {144  ,    3997},
    {147  ,    3983},
    {151  ,    3968},
    {140  ,    3950},
    {135  ,    3932},
    {123  ,    3915},
    {115  ,    3900},
    {113  ,    3889},
    {112  ,    3878},
    {108  ,    3866},
    {110  ,    3856},
    {105  ,    3847},
    {103  ,    3839},
    {105  ,    3831},
    {103  ,    3823},
    {108  ,    3818},
    {108  ,    3811},
    {108  ,    3805},
    {109  ,    3799},
    {109  ,    3794},
    {110  ,    3788},
    {110  ,    3783},
    {115  ,    3782},
    {115  ,    3774},
    {108  ,    3763},
    {103  ,    3754},
    {104  ,    3747},
    {100  ,    3740},
    {99   ,    3734},
    {103  ,    3729},
    {106  ,    3721},
    {108  ,    3715},
    {104  ,    3706},
    {104  ,    3697},
    {110  ,    3690},
    {95   ,    3680},
    {96   ,    3677},
    {105  ,    3676},
    {242  ,    3671},
    {395  ,    3661},
    {551  ,    3614},
    {910  ,    3544},
    {5021 ,    3442} 	       
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
    {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

